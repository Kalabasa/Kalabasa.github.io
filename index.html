<!DOCTYPE html>
<html>
<head>
	<style type="text/css">
	html, body, iframe {
		width: 100%;
		height: 100%;
		margin: 0;
		padding: 0;
		overflow: hidden;
	}
	</style>
</head>
<body>
	<iframe id="f" src="build/index.html" frameborder="0"></iframe>
	<script>
	var ws = null;
	var timer;
	function reconn() {
		ws = null;
		if(timer) clearTimeout(timer);
		timer = setTimeout(function() {
			if(ws === null) {
				socket();
			}
		}, 2000);
	}
	function socket() {
		ws = new WebSocket("ws://localhost:9091");
		ws.onmessage = function(e) {
			var data = JSON.parse(e.data);
			if (data.r) {
				document.getElementById("f").contentWindow.location.reload();
			}
		};
		ws.onerror = reconn;
		ws.onclose = reconn;
	}
	socket();
	</script> 
</body>
</html>